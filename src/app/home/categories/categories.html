<section class="my-12 px-6 md:px-20">
  <div class="flex justify-between items-center mb-6">
    <h2 class="text-3xl font-bold text-gray-900">Browse by category</h2>

    <div class="flex gap-3">
      <button
        (click)="prev()"
        [disabled]="categories().length <= visibleCount || startIndex() === 0"
        class="p-2 bg-gray-100 hover:bg-gray-200 rounded-full transition disabled:opacity-50 disabled:cursor-not-allowed"
      >
        <span class="text-lg font-bold">←</span>
      </button>
      <button
        (click)="next()"
        [disabled]="
          categories().length <= visibleCount || startIndex() + visibleCount >= categories().length
        "
        class="p-2 bg-gray-100 hover:bg-gray-200 rounded-full transition disabled:opacity-50 disabled:cursor-not-allowed"
      >
        <span class="text-lg font-bold">→</span>
      </button>
    </div>
  </div>

  <div *ngIf="loading()" class="text-center text-gray-500 py-10">Loading categories...</div>

  <div
    *ngIf="!loading()"
    class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-6 transition-all duration-300 ease-in-out"
  >
    <div
      *ngFor="let cat of visibleCategories(); trackBy: trackById"
      (click)="onCategoryClick(cat)"
      class="bg-white shadow-sm rounded-2xl overflow-hidden cursor-pointer hover:shadow-lg transition duration-300"
    >
      <div
        class="h-40 bg-cover bg-center"
        [style.background-image]="'url(' + cat.image + ')'"
      ></div>
      <div class="p-4">
        <h3 class="text-lg font-semibold text-gray-800">{{ cat.name }}</h3>
        <p class="text-gray-500 text-sm">{{ cat.productCount }} products</p>
      </div>
    </div>
  </div>
</section>
